# Task Description
Re-align the biometric assembly notebook to load vetted Stage 1 demographics, validate sensor feature extraction, and merge biometric outputs with the established unified-view (UV) dataset without overwriting assets produced by the self-report pipeline.

## Task Plan
1. Audit inputs and outputs
	1.1 Open `analysis/assemble_uv.ipynb` to confirm the Stage 1 export path and schema used by the self-report workflow.
	1.2 Inventory current biometric notebook outputs in `results/` to identify any filenames that must be renamed for isolation.
2. Refactor Stage 1 in `analysis/assemble_uv_biometric.ipynb`
	2.1 Replace the metadata extraction cells with logic that reads the Stage 1 CSV generated by the self-report notebook.
	2.2 Validate that respondent identifiers, group labels, and title mappings load correctly; log discrepancies to a QC frame.
3. Validate Stage 2 sensor ingestion
	3.1 Re-run the sensor file discovery and ensure each respondent maps to the correct sensor export.
	3.2 Review required sensor columns; capture missing metrics per respondent in a distinct issues table.
4. Enhance feature computation safeguards
	4.1 Confirm key-moment windowing for long-form segments aligns with timing tables; add assertions for out-of-range durations.
	4.2 Ensure aggregation functions gracefully handle empty or sparse signals and surface warnings rather than failing silently.
5. Implement UV merge for biometrics
	5.1 Load `results/uv_merged.csv` and join with the Stage 2 biometric features on respondent ID.
	5.2 Persist merged biometric UV outputs with `uv_biometric_*` filenames (features, UV, issues) to avoid clashes.
6. Document and verify
	6.1 Update notebook markdown to reflect the streamlined workflow and QC steps.
	6.2 Spot-check resulting CSVs and note verification outcomes in this task plan’s progress log.

## Progress
- 2025-11-13: Drafted detailed task description and plan.
- 2025-11-13: Step 1 completed — confirmed Stage 1 export (`results/uv_stage1.csv`) schema and noted absence of existing biometric-specific results in `results/`, leaving namespace free for new outputs.
- 2025-11-13: Step 2 completed — refactored Stage 1 section to load the shared `uv_stage1.csv`, validated expected columns/group coverage, and captured notebook summary metrics.
- 2025-11-13: Step 3 completed — Stage 2 now derives respondents from the refreshed Stage 1 roster, validates on-disk sensor coverage, and logs missing exports before processing.
- 2025-11-13: Step 4 completed — Updated the sensor pipeline to rely on `wbdlib` helpers for resilient writes and renamed outputs to biometric-specific filenames to avoid clashes.
- 2025-11-13: Step 5 completed — Added the UV merge section to combine biometric features with `uv_merged.csv`, emitting `uv_biometric_full.csv` alongside merge diagnostics.